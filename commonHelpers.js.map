{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://api.thecatapi.com/v1/';\naxios.defaults.headers.common['x-api-key'] =\n  'live_Q0VNADEy32RTi0X0eKuhYCfTRuaBwaRjJYXAI9dpQx4K9UpiqQs3veVx8O0mXCjR';\n\nasync function fetchBreeds() {\n  const { data } = await axios.get('breeds');\n  return data;\n}\n\nasync function fetchCatByBreed(breedId) {\n  const { data } = await axios.get('images/search', {\n    params: {\n      breed_ids: breedId,\n    },\n  });\n  return data;\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import SlimSelect from 'slim-select';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst selector = document.querySelector('.breed-select');\nconst catInfo = document.querySelector('.cat-info');\nconst loader = document.querySelector('.loader');\n\nhandleBreeds();\n\nasync function handleBreeds() {\n  selector.style.display = 'none';\n  loader.style.display = 'block';\n  try {\n    const response = await fetchBreeds();\n    selector.style.display = 'flex';\n    initSelect(response);\n  } catch (error) {\n    iziToast.error({\n      timeout: 5000,\n      position: 'topRight',\n      message: 'Oops! Something went wrong! Try reloading the page!',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nfunction initSelect(arr) {\n  new SlimSelect({\n    select: selector,\n    settings: {\n      showSearch: false,\n    },\n    data: arr.map(({ name, id }) => {\n      return {\n        text: name,\n        value: name,\n        id: id,\n      };\n    }),\n    events: {\n      beforeChange: () => catInfo.replaceChildren(),\n      afterChange: handleSelectChange,\n    },\n  });\n}\n\nasync function handleSelectChange(result) {\n  loader.style.display = 'block';\n  try {\n    const response = await fetchCatByBreed(result[0].id);\n    if (!response.length) throw new Error('Please, select another breed!');\n\n    catInfo.insertAdjacentHTML('beforeend', createCatDetailMark(response[0]));\n  } catch (error) {\n    iziToast.error({\n      timeout: 10000,\n      position: 'topRight',\n      message: error.message,\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nfunction createCatDetailMark({ url, breeds }) {\n  return `\n    <img class=\"cat-info__image\" src=\"${url}\" >\n    <div class=\"cat-info__info\">\n      <h2>${breeds[0].name}</h2>\n      <p>${breeds[0].description}</p>\n      <p><strong>Temperament</strong>: ${breeds[0].temperament}</p>\n    </div>\n  `;\n}\n"],"names":["axios","fetchBreeds","data","fetchCatByBreed","breedId","selector","catInfo","loader","handleBreeds","response","initSelect","iziToast","arr","SlimSelect","name","id","handleSelectChange","result","createCatDetailMark","error","url","breeds"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,gCACzBA,EAAM,SAAS,QAAQ,OAAO,WAAW,EACvC,wEAEF,eAAeC,GAAc,CAC3B,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMF,EAAM,IAAI,QAAQ,EACzC,OAAOE,CACT,CAEA,eAAeC,EAAgBC,EAAS,CACtC,KAAM,CAAE,KAAAF,CAAM,EAAG,MAAMF,EAAM,IAAI,gBAAiB,CAChD,OAAQ,CACN,UAAWI,CACZ,CACL,CAAG,EACD,OAAOF,CACT,CCZA,MAAMG,EAAW,SAAS,cAAc,eAAe,EACjDC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAS,SAAS,cAAc,SAAS,EAE/CC,IAEA,eAAeA,GAAe,CAC5BH,EAAS,MAAM,QAAU,OACzBE,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAME,EAAW,MAAMR,IACvBI,EAAS,MAAM,QAAU,OACzBK,EAAWD,CAAQ,CACpB,MAAe,CACdE,EAAS,MAAM,CACb,QAAS,IACT,SAAU,WACV,QAAS,qDACf,CAAK,CACL,QAAY,CACRJ,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,SAASG,EAAWE,EAAK,CACvB,IAAIC,EAAW,CACb,OAAQR,EACR,SAAU,CACR,WAAY,EACb,EACD,KAAMO,EAAI,IAAI,CAAC,CAAE,KAAAE,EAAM,GAAAC,CAAE,KAChB,CACL,KAAMD,EACN,MAAOA,EACP,GAAIC,CACZ,EACK,EACD,OAAQ,CACN,aAAc,IAAMT,EAAQ,gBAAiB,EAC7C,YAAaU,CACd,CACL,CAAG,CACH,CAEA,eAAeA,EAAmBC,EAAQ,CACxCV,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAME,EAAW,MAAMN,EAAgBc,EAAO,CAAC,EAAE,EAAE,EACnD,GAAI,CAACR,EAAS,OAAQ,MAAM,IAAI,MAAM,+BAA+B,EAErEH,EAAQ,mBAAmB,YAAaY,EAAoBT,EAAS,CAAC,CAAC,CAAC,CACzE,OAAQU,EAAO,CACdR,EAAS,MAAM,CACb,QAAS,IACT,SAAU,WACV,QAASQ,EAAM,OACrB,CAAK,CACL,QAAY,CACRZ,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,SAASW,EAAoB,CAAE,IAAAE,EAAK,OAAAC,GAAU,CAC5C,MAAO;AAAA,wCAC+BD,CAAG;AAAA;AAAA,YAE/BC,EAAO,CAAC,EAAE,IAAI;AAAA,WACfA,EAAO,CAAC,EAAE,WAAW;AAAA,yCACSA,EAAO,CAAC,EAAE,WAAW;AAAA;AAAA,GAG9D"}